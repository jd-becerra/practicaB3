!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=10)}([function(e,t,n){"use strict";t.__esModule=!0,t.extend=s,t.indexOf=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}if(!i.test(e))return e;return e.replace(o,a)},t.isEmpty=function(e){return!e&&0!==e||!(!c(e)||0!==e.length)},t.createFrame=function(e){var t=s({},e);return t._parent=e,t},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},o=/[&<>"'`=]/g,i=/[&<>"'`=]/;function a(e){return r[e]}function s(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}var u=Object.prototype.toString;t.toString=u;var l=function(e){return"function"==typeof e};l(/x/)&&(t.isFunction=l=function(e){return"function"==typeof e&&"[object Function]"===u.call(e)}),t.isFunction=l;var c=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===u.call(e)};t.isArray=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(12);var a={api:{host:"https://seguro.marca.com/ueregistro",version:"v2"},iframe:{version:"v3",host:"https://seguro.marca.com",origin_domain:".marca.com"},newApp:{version:"v1/es",host:"https://www.marca.com",path:"micuenta/v1/es",origin_domain:".marca.com",complete:!0},portalId:2};a=o({},((r=i)&&r.__esModule?r:{default:r}).default,a),t.default=a},function(e,t,n){"use strict";t.__esModule=!0;var r=["description","fileName","lineNumber","message","name","number","stack"];function o(e,t){var n=t&&t.loc,i=void 0,a=void 0;n&&(e+=" - "+(i=n.start.line)+":"+(a=n.start.column));for(var s=Error.prototype.constructor.call(this,e),u=0;u<r.length;u++)this[r[u]]=s[r[u]];Error.captureStackTrace&&Error.captureStackTrace(this,o);try{n&&(this.lineNumber=i,Object.defineProperty?Object.defineProperty(this,"column",{value:a,enumerable:!0}):this.column=a)}catch(e){}}o.prototype=new Error,t.default=o,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=null,i=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o||(o=this),this.events={},o}return r(e,[{key:"emit",value:function(e,t){var n=this.events[e];n&&n.forEach((function(e){e.call(null,t)}))}},{key:"subscribe",value:function(e,t){var n=this;return this.events[e]||(this.events[e]=[]),this.events[e].push(t),function(){n.events[e]=n.events[e].filter((function(e){return t!==e}))}}},{key:"unsubscribe",value:function(e,t){if(!this.events[e])return!1;for(var n=0,r=this.events[e];n<r.length;++n)if(r[n]===t)return r.splice(n,1),!0;return!1}}]),e}();t.default=i},function(e,t,n){"undefined"!=typeof self&&self,e.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=null,i=null,a=!0,s=!1,u="onorientationchange"in window?"orientationchange":"resize",l={},c=function(e,t,n,r,i,a,s){var u=null;if((o=document.createElement("section")).className="lightbox"+(n?" "+n:""),o.style.display="block",t){var l=document.createElement("h1");l.innerHTML=t,o.appendChild(l),l=null}if(r){var c=function(){var e=document.createElement("div");return e.className="cerrar",e.title="Cerrar",e}();if(c.onclick=p,o.appendChild(c),0!==s)var f=setTimeout((function(){p(),clearTimeout(f)}),s);c=null,document.onkeydown=function(e){27==(e=e||window.event).keyCode&&p()}}return"iframe"==i&&((u=document.createElement("iframe")).src=e),"content"==i&&((u=document.createElement("div")).innerHTML=a,u=u.firstChild),u&&o.appendChild(u),document.body.appendChild(o)},f=function(e){var t=document.createElement("div");return t.className="lightbox_shadow"+(e?" "+e:""),document.body.insertBefore(t,o)},d=function(){var e=window,t=document,n=t.documentElement,r=t.body;return{w:e.innerWidth||n.clientWidth||r.clientWidth,h:e.innerHeight||n.clientHeight||r.clientHeight}},h=function(){o&&v&&function(){var e=d(),t=e.w>o.offsetWidth?parseInt((e.w-o.offsetWidth)/2):0,n=e.h>o.offsetHeight?parseInt((e.h-o.offsetHeight)/2):0;o.style.left=t+"px",o.style.top=n+"px"}()},p=function(){return!!(a&&o&&s)&&(s=!1,function(e,t,n,r){"function"==typeof n&&(e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on"+t,n))}(window,u,h,!1),document.body.removeChild(o),o=null,document.body.classList.remove("disabled-vscroll"),i&&(document.body.removeChild(i),i=null),function(e){if(l[e])for(var t=l[e].length,n=0;n<t;++n)try{l[e][n]()}catch(e){}}("close"),!0)},v=function(){return s},g={open:function(e){var t,n,o,u,d,h,v,g;return!(s||"object"!=(void 0===e||void 0===e?"undefined":r(e))||(h="string"==typeof e.type?e.type:"iframe","content"==h&&(v="string"==typeof e.innerHTML?e.innerHTML:""),"iframe"==h&&""===(t="string"==typeof e.url?e.url:"")||(n="string"==typeof e.title?e.title:"",o="string"==typeof e.className?e.className:"",a="boolean"!=typeof e.close||e.close,u="boolean"!=typeof e.backdrop||e.backdrop,d="string"==typeof e.shadowClassName?e.shadowClassName:"",g="number"==typeof e.closeTimeOut?e.closeTimeOut:0,c(t,n,o,a,h,v,g),document.body.classList.add("disabled-vscroll"),i=f(d),u&&(i.onclick=p),s=!0,l={},0)))},close:p,isOpen:v,addCallback:function(e,t){"function"==typeof t&&(l[e]||(l[e]=[]),l[e].push(t))}};t.default=g}])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=null,i=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o||(this.domain=document.domain.replace(new RegExp(document.domain.split(".").shift()),""),this.cookie=null,o=this),o}return r(e,[{key:"isValid",value:function(e){if(navigator.cookieEnabled){new RegExp("[0-9a-zA-Z]+-(?:[a-zA-Z0-9+/]{4})*(?:|(?:[a-zA-Z0-9+/]{3}=)|(?:[a-zA-Z0-9+/]{2}==)|(?:[a-zA-Z0-9+/]{1}===))$");return""!=this.getCookie(e)}return!1}},{key:"getCookie",value:function(e){return navigator.cookieEnabled&&(this.cookie=decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;\\s*)"+e+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))),this.cookie}},{key:"removeCookie",value:function(e){var t=!1;return navigator.cookieEnabled&&this.getCookie(e)&&(document.cookie=e+"=; Path=/;Domain="+this.domain+";Max-Age=0",t=!0),t}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._getTranslations=void 0;var r,o=n(1),i=(r=o)&&r.__esModule?r:{default:r};t._getTranslations=function(){var e=window.navigator.language.split("-")[0],t=i.default.messages.es;return i.default.messages[e]?i.default.messages[e]:t}},function(e,t,n){e.exports=n(16).default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.HandlebarsEnvironment=l;var o=n(0),i=r(n(2)),a=n(17),s=n(25),u=r(n(27));t.VERSION="4.0.12";t.COMPILER_REVISION=7;t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};function l(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},a.registerDefaultHelpers(this),s.registerDefaultDecorators(this)}l.prototype={constructor:l,logger:u.default,log:u.default.log,registerHelper:function(e,t){if("[object Object]"===o.toString.call(e)){if(t)throw new i.default("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if("[object Object]"===o.toString.call(e))o.extend(this.partials,e);else{if(void 0===t)throw new i.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if("[object Object]"===o.toString.call(e)){if(t)throw new i.default("Arg not supported with multiple decorators");o.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]}};var c=u.default.log;t.log=c,t.createFrame=o.createFrame,t.logger=u.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e instanceof Function&&(o?i(e):r.push(e))};var r=[],o=!1;function i(e){try{e()}catch(e){console.error(e)}}function a(){var e;for(o=!0;e=r.shift();)i(e)}function s(){document.removeEventListener("DOMContentLoaded",s),window.removeEventListener("load",s),a()}"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?window.setTimeout(a):(document.addEventListener("DOMContentLoaded",s),window.addEventListener("load",s))},function(e,t,n){"use strict";var r=s(n(11)),o=s(n(14)),i=s(n(1)),a=s(n(9));s(n(43));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e,t,n){return void 0===e._data&&(e._data={}),void 0===n?e._data[t]:e._data[t]=n};(0,a.default)((function(){if(!0!==u(document,"loginProxyEnabled")){u(document,"loginProxyEnabled",!0);var e=i.default.binding.container;[].slice.apply(document.querySelectorAll(e)).map((function(e){new r.default(document);var t=e.dataset.csp;new o.default(e,t)}))}}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=c(n(1)),i=c(n(3)),a=c(n(4)),u=c(n(5)),l=n(6);function c(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t,this.cookieManager=new u.default,this.cookieName=o.default.cookie[location.protocol.replace(":","")],this.emitter=new i.default,this.fnLogin=this.loginAction.bind(this),this.fnLogout=this.logoutAction.bind(this),this.fnRegistry=this.registryAction.bind(this),this.fnGrantAccess=this.grantAccess.bind(this),this.fnMessage=this.readMessage.bind(this),this.node.addEventListener("REGLogin",this.fnLogin),this.node.addEventListener("REGLogout",this.fnLogout),this.node.addEventListener("REGRegistry",this.fnRegistry),this.node.addEventListener("REGGrantAccess",this.fnGrantAccess),window.addEventListener("message",this.fnMessage),this.registerActions={logged:this.logged.bind(this),loggedOut:this.loggedOut.bind(this),error:this.registerError.bind(this),analytics:this.setAnalytic.bind(this)},this.messages=(0,l._getTranslations)()}return r(e,[{key:"loginAction",value:function(e){if(this.cookieManager.isValid(this.cookieName))this.logged();else{var t="&";e.detail&&e.detail.csp&&(t="&csp="+e.detail.csp+"&");var n=encodeURIComponent(window.location.href);o.default.newApp&&o.default.newApp.complete?window.location.href=o.default.newApp.host+"/"+o.default.newApp.path+"/auth?view=login"+t+"url_redirect="+n:window.location.href=o.default.iframe.host+"/registro/"+o.default.iframe.version+"/?view=login"+t+"url_redirect="+n}}},{key:"logoutAction",value:function(){var e=o.default.iframe.host+"/registro/"+o.default.iframe.version+"/?view=logout";o.default.newApp&&o.default.newApp.complete&&(e=o.default.newApp.host+"/"+o.default.newApp.path+"/user-area/logout"),a.default.open({type:"iframe",url:e,title:""+this.messages.logoutModal,className:"inicio-sesion",closable:!0,backdrop:!0})}},{key:"registryAction",value:function(e){var t="&";e.detail&&e.detail.csp&&(t="&csp="+e.detail.csp+"&");var n=encodeURIComponent(window.location.href);o.default.newApp&&o.default.newApp.complete?window.location.href=o.default.newApp.host+"/"+o.default.newApp.path+"/auth?view=signup"+t+"url_redirect="+n:window.location.href=o.default.iframe.host+"/registro/"+o.default.iframe.version+"/?view=signup"+t+"url_redirect="+n}},{key:"grantAccess",value:function(e){var t="&";if(e.detail&&e.detail.csp){t="&csp="+e.detail.csp+"&";var n=encodeURIComponent(window.location.href);o.default.newApp&&o.default.newApp.complete?window.location.href=o.default.newApp.host+"/"+o.default.newApp.path+"/auth/complete-data?"+t+"url_redirect="+n+"&logged=on":window.location.href=o.default.iframe.host+"/registro/"+o.default.iframe.version+"/?view=completeData"+t+"url_redirect="+n+"&logged=on"}else console.error("csp needed")}},{key:"doable",value:function(e,t){if(!t.data||!this.registerActions.hasOwnProperty(e))throw new Error("invalid message");this.registerActions[e](t.data)}},{key:"readMessage",value:function(e){if(new RegExp(o.default.iframe.origin_domain).test(e.origin))try{var t=JSON.parse(e.data);if(t.origin&&"registro"==t.origin){if(!t.action)throw new Error("invalid action"+t.action);this.doable(t.action,t),"analytics"!=t.action&&a.default.close()}}catch(e){}}},{key:"logged",value:function(){var e=new CustomEvent("login",{bubbles:!0});this.node.dispatchEvent(e)}},{key:"loggedOut",value:function(){var e=new CustomEvent("logout",{bubbles:!0});this.node.dispatchEvent(e)}},{key:"registerError",value:function(e){console.debug(e)}},{key:"setAnalytic",value:function(e){window.s_omniture=JSON.parse(atob(e.s_omniture)),s.t()}}]),e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(13);var a={cookie:{http:"REGMARCA",https:"REGMARCA",forceUpdate:"REGMARCAACTU"},css:{activePanelClass:"user-info-open"},defaultAvatar:"https://e00-mx-marca.uecdn.es/mx/assets/uelogin/v2/images/avatar.svg"};a=o({},((r=i)&&r.__esModule?r:{default:r}).default,a),t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={binding:{container:".js-ueUserPanel",loginBtn:".js-loginClick",logoutBtn:".js-logOutBtn",registryBtn:".js-registryClick",myAccountBtn:".js-myAcountBtn",userPanelBtn:".js-userPanelBtn",userPanelCloseBtn:".js-userPanelCloseBtn"},endPoints:{user:"usuarios",userData:"obtencion-datos-personales",validate:"validacion",validateAndGetData:"validacion-usuario",userDataType:2},localStore:{jwt:{keyName:"uejwt"},validation:{expires:864e5,keyName:"validate"},user:{keyName:"profile"}},messages:{es:{login:"Iniciar sesión",logout:"Cerrar sesión",myAccount:"Mi cuenta",close:"Cerrar",logoutModal:"Cerrando sesión"},en:{login:"Iniciar sesión",logout:"Cerrar sesión",myAccount:"Mi cuenta",close:"Cerrar",logoutModal:"Cerrando sesión"}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=c(n(1)),i=c(n(15)),a=c(n(32)),s=c(n(3)),u=(c(n(4)),c(n(33))),l=n(6);function c(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t,this.csp=n,this.active=!1,this.header=document.getElementsByClassName("js-header-energize"),this.fnRender=this.render.bind(this);var r=document.querySelector(".js-header-energize");this.layout=!(!r||!r.dataset.layout||"minified"!=r.dataset.layout),this.emitter=new s.default,this.emitter.subscribe("logged",this.fnRender),this.emitter.subscribe("loggedOut",this.fnRender),this.user=new u.default,this.user.avatar_medium=o.default.defaultAvatar,this.messages=(0,l._getTranslations)()}return r(e,[{key:"showHidePanel",value:function(e){e&&e.preventDefault();var t=this.node.querySelector(".info-usuario");null!==t&&(t.previousElementSibling.setAttribute("aria-expanded",!t.classList.contains(o.default.css.activePanelClass)),t.classList.toggle(o.default.css.activePanelClass))}},{key:"loginRequest",value:function(e){e&&e.preventDefault();var t=new CustomEvent("REGLogin",{bubbles:!0,detail:{csp:this.csp}});this.node.dispatchEvent(t)}},{key:"logoutRequest",value:function(e){e&&e.preventDefault();var t=new CustomEvent("REGLogout",{bubbles:!0,detail:{csp:this.csp}});this.node.dispatchEvent(t)}},{key:"registryRequest",value:function(){var e=new CustomEvent("REGRegistry",{bubbles:!0,detail:{csp:this.csp}});this.node.dispatchEvent(e)}},{key:"showUserData",value:function(e){e&&e.preventDefault(),this.showHidePanel();var t=encodeURIComponent(window.location.href);o.default.newApp?window.location.href=o.default.newApp.host+"/"+o.default.newApp.path+"/user-area/profile-data":window.location.href=o.default.iframe.host+"/registro/"+o.default.iframe.version+"/?view=userArea&url_redirect="+t}},{key:"binding",value:function(){var e=this.node.querySelector(o.default.binding.loginBtn);null!==e&&e.addEventListener("click",this.loginRequest.bind(this));var t=this.node.querySelector(o.default.binding.logoutBtn);null!==t&&t.addEventListener("click",this.logoutRequest.bind(this));var n=this.node.querySelector(o.default.binding.registryBtn);null!==n&&n.addEventListener("click",this.registryRequest.bind(this));var r=this.node.querySelector(o.default.binding.myAccountBtn);null!==r&&r.addEventListener("click",this.showUserData.bind(this));var i=this.node.querySelector(o.default.binding.userPanelBtn);null!==i&&i.addEventListener("click",this.showHidePanel.bind(this));var a=this.node.querySelector(o.default.binding.userPanelCloseBtn);null!==i&&a.addEventListener("click",this.showHidePanel.bind(this))}},{key:"render",value:function(){var e=(0,i.default)(this);1==this.layout&&(e=(0,a.default)(this)),this.node.innerHTML=e,this.binding()}}]),e}();t.default=f},function(e,t,n){var r=n(7);e.exports=(r.default||r).template({1:function(e,t,n,r,o){var i;return"    <a title='Login' class='tools-corporative-link js-loginClick' href='#'>\n        <span>"+e.escapeExpression(e.lambda(null!=(i=null!=t?t.messages:t)?i.login:i,t))+'</span>\n        <i class="icon-login"></i>\n    </a>\n'},3:function(e,t,n,r,o){var i,a=e.lambda,s=e.escapeExpression;return'<a class=\'user-name js-userPanelBtn\' aria-haspopup="true" aria-expanded="false" aria-controls="toolbar" aria-label="Usuario:" tabindex="0" href=\'#\'>\n    <img class=\'\' src=\''+s(a(null!=(i=null!=t?t.user:t)?i.avatar:i,t))+"' alt='"+s(a(null!=(i=null!=t?t.user:t)?i.nick:i,t))+"'>\n</a>\n<div id='toolbar' class='info-usuario user-info'>\n    <a class=\"cerrar js-userPanelCloseBtn\" href=\"#\">"+s(a(null!=(i=null!=t?t.messages:t)?i.close:i,t))+"</a>\n    <a class=\"user-name active\">\n        <img class='' src='"+s(a(null!=(i=null!=t?t.user:t)?i.avatar:i,t))+"' alt='"+s(a(null!=(i=null!=t?t.user:t)?i.nick:i,t))+"'>\n    </a>\n    <ul>\n        <li class='my-account'>\n            <a class=\"js-myAcountBtn\" href='#'>"+s(a(null!=(i=null!=t?t.messages:t)?i.myAccount:i,t))+"</a>\n        </li>\n        <li class='log-out'>\n            <a class=\"js-logOutBtn\" href='#'>"+s(a(null!=(i=null!=t?t.messages:t)?i.logout:i,t))+'</a>\n        </li>\n    </ul>\n</div>\n<style>\n.lightbox.inicio-sesion {\n    width: 100vw;\n    height: 100vh;\n    top: 0;\n    left: 0;\n    margin: 0;\n    padding: 0;\n    background: #fff;\n}\n.lightbox.inicio-sesion .cerrar {\n    display: none;\n}\n.lightbox.inicio-sesion h1 {\n    clip: initial;\n    width: 100%;\n    height: 50%;\n    display: flex;\n    justify-content: center;\n    align-items: flex-end;\n    margin-top: -80px;\n    background: white;\n    font-family: "Source Sans Pro",Arial,sans-serif,helvetica;\n    font-size: 22px;\n}\n</style>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,o){var i,a=e.lambda,s=n.blockHelperMissing;return(null!=(i=s.call(t,a(null!=(i=null!=t?t.user:t)?i.logged:i,t),{name:"user.logged",hash:{},fn:e.noop,inverse:e.program(1,o,0),data:o}))?i:"")+(null!=(i=s.call(t,a(null!=(i=null!=t?t.user:t)?i.logged:i,t),{name:"user.logged",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o}))?i:"")},useData:!0})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.__esModule=!0;var i=o(n(8)),a=r(n(28)),s=r(n(2)),u=o(n(0)),l=o(n(29)),c=r(n(30));function f(){var e=new i.HandlebarsEnvironment;return u.extend(e,i),e.SafeString=a.default,e.Exception=s.default,e.Utils=u,e.escapeExpression=u.escapeExpression,e.VM=l,e.template=function(t){return l.template(t,e)},e}var d=f();d.create=f,c.default(d),d.default=d,t.default=d,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.registerDefaultHelpers=function(e){o.default(e),i.default(e),a.default(e),s.default(e),u.default(e),l.default(e),c.default(e)};var o=r(n(18)),i=r(n(19)),a=r(n(20)),s=r(n(21)),u=r(n(22)),l=r(n(23)),c=r(n(24))},function(e,t,n){"use strict";t.__esModule=!0;var r=n(0);t.default=function(e){e.registerHelper("blockHelperMissing",(function(t,n){var o=n.inverse,i=n.fn;if(!0===t)return i(this);if(!1===t||null==t)return o(this);if(r.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):o(this);if(n.data&&n.ids){var a=r.createFrame(n.data);a.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:a}}return i(t,n)}))},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var r,o=n(0),i=n(2),a=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("each",(function(e,t){if(!t)throw new a.default("Must pass iterator to #each");var n=t.fn,r=t.inverse,i=0,s="",u=void 0,l=void 0;function c(t,r,i){u&&(u.key=t,u.index=r,u.first=0===r,u.last=!!i,l&&(u.contextPath=l+t)),s+=n(e[t],{data:u,blockParams:o.blockParams([e[t],t],[l+t,null])})}if(t.data&&t.ids&&(l=o.appendContextPath(t.data.contextPath,t.ids[0])+"."),o.isFunction(e)&&(e=e.call(this)),t.data&&(u=o.createFrame(t.data)),e&&"object"==typeof e)if(o.isArray(e))for(var f=e.length;i<f;i++)i in e&&c(i,i,i===e.length-1);else{var d=void 0;for(var h in e)e.hasOwnProperty(h)&&(void 0!==d&&c(d,i-1),d=h,i++);void 0!==d&&c(d,i-1,!0)}return 0===i&&(s=r(this)),s}))},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var r,o=n(2),i=(r=o)&&r.__esModule?r:{default:r};t.default=function(e){e.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new i.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var r=n(0);t.default=function(e){e.registerHelper("if",(function(e,t){return r.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||r.isEmpty(e)?t.inverse(this):t.fn(this)})),e.registerHelper("unless",(function(t,n){return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}))},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("log",(function(){for(var t=[void 0],n=arguments[arguments.length-1],r=0;r<arguments.length-1;r++)t.push(arguments[r]);var o=1;null!=n.hash.level?o=n.hash.level:n.data&&null!=n.data.level&&(o=n.data.level),t[0]=o,e.log.apply(e,t)}))},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",(function(e,t){return e&&e[t]}))},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var r=n(0);t.default=function(e){e.registerHelper("with",(function(e,t){r.isFunction(e)&&(e=e.call(this));var n=t.fn;if(r.isEmpty(e))return t.inverse(this);var o=t.data;return t.data&&t.ids&&((o=r.createFrame(t.data)).contextPath=r.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:o,blockParams:r.blockParams([e],[o&&o.contextPath])})}))},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.registerDefaultDecorators=function(e){i.default(e)};var r,o=n(26),i=(r=o)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(0);t.default=function(e){e.registerDecorator("inline",(function(e,t,n,o){var i=e;return t.partials||(t.partials={},i=function(o,i){var a=n.partials;n.partials=r.extend({},a,t.partials);var s=e(o,i);return n.partials=a,s}),t.partials[o.args[0]]=o.fn,i}))},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var r=n(0),o={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=r.indexOf(o.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=o.lookupLevel(e),"undefined"!=typeof console&&o.lookupLevel(o.level)<=e){var t=o.methodMap[e];console[t]||(t="log");for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];console[t].apply(console,r)}}};t.default=o,e.exports=t.default},function(e,t,n){"use strict";function r(e){this.string=e}t.__esModule=!0,r.prototype.toString=r.prototype.toHTML=function(){return""+this.string},t.default=r,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,n=s.COMPILER_REVISION;if(t!==n){if(t<n){var r=s.REVISION_CHANGES[n],o=s.REVISION_CHANGES[t];throw new a.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+o+").")}throw new a.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}},t.template=function(e,t){if(!t)throw new a.default("No environment passed to template");if(!e||!e.main)throw new a.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var n={strict:function(e,t){if(!(t in e))throw new a.default('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var n=e.length,r=0;r<n;r++)if(e[r]&&null!=e[r][t])return e[r][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:o.escapeExpression,invokePartial:function(n,r,i){i.hash&&(r=o.extend({},r,i.hash),i.ids&&(i.ids[0]=!0)),n=t.VM.resolvePartial.call(this,n,r,i);var s=t.VM.invokePartial.call(this,n,r,i);if(null==s&&t.compile&&(i.partials[i.name]=t.compile(n,e.compilerOptions,t),s=i.partials[i.name](r,i)),null!=s){if(i.indent){for(var u=s.split("\n"),l=0,c=u.length;l<c&&(u[l]||l+1!==c);l++)u[l]=i.indent+u[l];s=u.join("\n")}return s}throw new a.default("The partial "+i.name+" could not be compiled when running in runtime-only mode")},fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,r,o){var i=this.programs[e],a=this.fn(e);return t||o||r||n?i=u(this,e,a,t,n,r,o):i||(i=this.programs[e]=u(this,e,a)),i},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=o.extend({},t,e)),n},nullContext:Object.seal({}),noop:t.VM.noop,compilerInfo:e.compiler};function r(t){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=o.data;r._setup(o),!o.partial&&e.useData&&(i=c(t,i));var a=void 0,s=e.useBlockParams?[]:void 0;function u(t){return""+e.main(n,t,n.helpers,n.partials,i,s,a)}return e.useDepths&&(a=o.depths?t!=o.depths[0]?[t].concat(o.depths):o.depths:[t]),(u=f(e.main,u,n,o.depths||[],i,s))(t,o)}return r.isTop=!0,r._setup=function(r){r.partial?(n.helpers=r.helpers,n.partials=r.partials,n.decorators=r.decorators):(n.helpers=n.merge(r.helpers,t.helpers),e.usePartial&&(n.partials=n.merge(r.partials,t.partials)),(e.usePartial||e.useDecorators)&&(n.decorators=n.merge(r.decorators,t.decorators)))},r._child=function(t,r,o,i){if(e.useBlockParams&&!o)throw new a.default("must pass block params");if(e.useDepths&&!i)throw new a.default("must pass parent depths");return u(n,t,e[t],r,0,o,i)},r},t.wrapProgram=u,t.resolvePartial=function(e,t,n){e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name];return e},t.invokePartial=function(e,t,n){var r=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var i=void 0;n.fn&&n.fn!==l&&function(){n.data=s.createFrame(n.data);var e=n.fn;i=n.data["partial-block"]=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=s.createFrame(n.data),n.data["partial-block"]=r,e(t,n)},e.partials&&(n.partials=o.extend({},n.partials,e.partials))}();void 0===e&&i&&(e=i);if(void 0===e)throw new a.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)},t.noop=l;var r,o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),i=n(2),a=(r=i)&&r.__esModule?r:{default:r},s=n(8);function u(e,t,n,r,o,i,a){function s(t){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=a;return!a||t==a[0]||t===e.nullContext&&null===a[0]||(s=[t].concat(a)),n(e,t,e.helpers,e.partials,o.data||r,i&&[o.blockParams].concat(i),s)}return(s=f(n,s,e,a,r,i)).program=t,s.depth=a?a.length:0,s.blockParams=o||0,s}function l(){return""}function c(e,t){return t&&"root"in t||((t=t?s.createFrame(t):{}).root=e),t}function f(e,t,n,r,i,a){if(e.decorator){var s={};t=e.decorator(t,s,n,r&&r[0],i,a,r),o.extend(t,s)}return t}},function(e,t,n){"use strict";(function(n){t.__esModule=!0,t.default=function(e){var t=void 0!==n?n:window,r=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=r),e}},e.exports=t.default}).call(this,n(31))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(7);e.exports=(r.default||r).template({1:function(e,t,n,r,o){var i;return'    <a href="#" class="js-loginClick">\n        <span class="hidden-content">'+e.escapeExpression(e.lambda(null!=(i=null!=t?t.messages:t)?i.login:i,t))+'</span>\n        <svg role="img" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n            <g stroke-width="1.5">\n                <path d="M11.955 4.705a3.249 3.249 0 0 0-3.25 3.25 3.249 3.249 0 0 0 3.25 3.25 3.249 3.249 0 0 0 3.25-3.25 3.249 3.249 0 0 0-3.25-3.25zM4.705 19.205h14.5v-1.25c0-1.661-3.968-3.25-7.25-3.25-3.283 0-7.25 1.589-7.25 3.25v1.25z"></path>\n            </g>\n        </svg>\n    </a>\n'},3:function(e,t,n,r,o){var i,a=e.lambda,s=e.escapeExpression;return"<a title='"+s(a(null!=(i=null!=t?t.user:t)?i.nick:i,t))+"' class='user-name js-userPanelBtn'>\n    <img class='' src='"+s(a(null!=(i=null!=t?t.user:t)?i.avatar:i,t))+"' alt='"+s(a(null!=(i=null!=t?t.user:t)?i.nick:i,t))+"'>\n</a>\n<div id='toolbar' class='info-usuario user-info'>\n    <a title=\"\" class=\"cerrar js-userPanelCloseBtn\">"+s(a(null!=(i=null!=t?t.messages:t)?i.close:i,t))+'</a>\n    <a title="" class="user-name active">\n        <img class=\'\' src=\''+s(a(null!=(i=null!=t?t.user:t)?i.avatar:i,t))+"' alt='"+s(a(null!=(i=null!=t?t.user:t)?i.nick:i,t))+"'>\n    </a>\n    <ul>\n        <li class='my-account'>\n            <a class=\"js-myAcountBtn\" href='#'>"+s(a(null!=(i=null!=t?t.messages:t)?i.myAccount:i,t))+"</a>\n        </li>\n        <li class='log-out'>\n            <a class=\"js-logOutBtn\" href='#'>"+s(a(null!=(i=null!=t?t.messages:t)?i.logout:i,t))+'</a>\n        </li>\n    </ul>\n</div>\n<style>\n.lightbox.inicio-sesion {\n    width: 100vw;\n    height: 100vh;\n    top: 0;\n    left: 0;\n    margin: 0;\n    padding: 0;\n    background: #fff;\n}\n.lightbox.inicio-sesion .cerrar {\n    display: none;\n}\n.lightbox.inicio-sesion h1 {\n    clip: initial;\n    width: 100%;\n    height: 50%;\n    display: flex;\n    justify-content: center;\n    align-items: flex-end;\n    margin-top: -80px;\n    background: white;\n    font-family: "Source Sans Pro",Arial,sans-serif,helvetica;\n    font-size: 22px;\n}\n</style>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,o){var i,a=e.lambda,s=n.blockHelperMissing;return(null!=(i=s.call(t,a(null!=(i=null!=t?t.user:t)?i.logged:i,t),{name:"user.logged",hash:{},fn:e.noop,inverse:e.program(1,o,0),data:o}))?i:"")+(null!=(i=s.call(t,a(null!=(i=null!=t?t.user:t)?i.logged:i,t),{name:"user.logged",hash:{},fn:e.program(3,o,0),inverse:e.noop,data:o}))?i:"")},useData:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=f(n(1)),a=f(n(3)),s=f(n(34)),u=f(n(5)),l=f(n(40)),c=f(n(42));function f(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.constructor.instance)return this.constructor.instance;this.constructor.instance=this,this.api=new s.default,this.emitter=new a.default,this.storageManager=new l.default,this.cookieManager=new u.default,this.jwtManager=new c.default,this.avatar="",this.logged=!1,this.nick="",this.cookieName=i.default.cookie[location.protocol.replace(":","")],this.forceUpdateCookieName=i.default.cookie.forceUpdate||"novalueavailable",this.runTimeout=null,this.timeoutAttempts=0,this.requestAttempts=0,this.requestDelay=10,this.rateLimitTimers=[],this.rateLimitResolves=[],this.run().then(this.bindEvents.bind(this))}return o(e,[{key:"bindEvents",value:function(){document.addEventListener("login",this.run.bind(this)),document.addEventListener("logout",this.logout.bind(this)),document.addEventListener("userDataModified",this.refresh.bind(this))}},{key:"clearRunTimeout",value:function(){this.runTimeout&&(clearTimeout(this.runTimeout),this.runTimeout=null)}},{key:"getCookieValidity",value:function(){return this.cookieManager.isValid(this.cookieName)}},{key:"getData",value:function(){var e=this;return this.getLocalData().then((function(t){return t.isLogged&&(t.isExpired||t.forceUpdate)?e.requestData().then(e.setLocalData.bind(e)).then(e.getLocalData.bind(e)).catch(console.error):t})).catch(console.error)}},{key:"getLocalData",value:function(){var e=this,t=this.getCookieValidity(),n=[t];return t&&(n=n.concat([this.getMaxAge(),this.jwtManager.get(),this.storageManager.get("profile"),this.getForceUpdate()])),Promise.all(n).then((function(t){return e.normalizeData.apply(e,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))})).catch(console.error)}},{key:"getMaxAge",value:function(){return this.storageManager.get(i.default.localStore.validation.keyName).then((function(e){var t=void 0;if("number"!=typeof e)try{t=parseInt(e)}catch(e){t=0,console.warn("Unexpected expiration value:",e)}return isNaN(t)&&(t=0),t=Math.max(e,0),Math.max(t-Date.now(),0)})).catch(console.error)}},{key:"getForceUpdate",value:function(){var e=this.cookieManager.getCookie(this.forceUpdateCookieName),t="true"===e||!0===e;return t&&this.cookieManager.removeCookie(this.forceUpdateCookieName),t}},{key:"logout",value:function(){this.cookieManager.removeCookie(this.cookieName),this.run()}},{key:"normalizeData",value:function(e,t,n,o,i){return{isLogged:e="boolean"==typeof e&&e,maxAge:t="number"!=typeof t||isNaN(t)?0:Math.max(t,0),jwt:n=n||"",userInfo:o=r({nick:"",avatar:""},o||{}),isExpired:0===t,forceUpdate:i=i||!1}}},{key:"notify",value:function(e){this.notifyLoggedUser(e),this.emitter.emit(e?"logged":"loggedOut")}},{key:"notifyLoggedUser",value:function(e){var t=new CustomEvent("loggedUser",{bubbles:!0,detail:{logged:e}});document.dispatchEvent(t)}},{key:"rateLimit",value:function(e,t,n,r){var o=this;if(this.rateLimitTimers[e]&&(clearTimeout(this.rateLimitTimers[e]),this.rateLimitTimers[e]=null),"function"==typeof n){var i=setTimeout((function(){r?n.apply(r):n(),o.rateLimitTimers[e]=null}),t);this.rateLimitTimers[e]=i}}},{key:"refresh",value:function(){this.storageManager.delete(i.default.localStore.validation.keyName).then(this.run.bind(this))}},{key:"requestData",value:function(){var e=this;if(!(++this.requestAttempts>5))return new Promise((function(t,n){var r=i.default.endPoints.user+"/"+i.default.endPoints.validateAndGetData+"/"+i.default.portalId,o=e.cookieManager.getCookie(e.cookieName),a={p1:[{nombre:e.cookieName,valor:encodeURIComponent(o)}]};e.rateLimitResolves.push(t),e.rateLimit("@ueLogin-post",e.requestDelay,(function(){e.requestDelay=e.requestDelay*e.requestDelay,e.api.post(r,a).then((function(t){var r=e.rateLimitResolves;switch(e.rateLimitResolves=[],t.status){case"OK":if(!t.data)throw new Error("[UeLogin] Data should be truly but it is not.");return t.data.isLogged=!0,r.forEach((function(e){return e(t.data)})),t.data;case"NOK":return console.warn("[UeLogin] Login rejected: ",t.data&&t.data.descripcion),r.forEach((function(e){return e(null)})),null;default:var o="[UeLogin] Unexpected request response status code.";throw n(o),new Error(o)}})).catch((function(e){console.error(e),t(void 0)}))}),e)}))}},{key:"removeLocalData",value:function(){var e=this.cookieManager.removeCookie(this.cookieName),t=this.jwtManager.remove(),n=this.storageManager.delete(i.default.localStore.validation.keyName),r=this.storageManager.delete(i.default.localStore.user.keyName);return Promise.all([e,t,n,r]).catch(console.error)}},{key:"run",value:function(){return this.clearRunTimeout(),this.getData().then(this.update.bind(this)).catch(console.error)}},{key:"setLocalData",value:function(e){switch(e){case void 0:return;case null:return this.removeLocalData();default:var t=i.default.localStore.validation.expires,n=Date.now()+t,r={nick:e&&e.nick||"",avatar:i.default.defaultAvatar||e&&e.url_avatar},o=this.storageManager.set(i.default.localStore.validation.keyName,n),a=this.jwtManager.set(e&&e.JWT||""),s=this.storageManager.set(i.default.localStore.user.keyName,r);return Promise.all([o,a,s]).catch(console.error)}}},{key:"setRunTimeout",value:function(e){if("number"==typeof e&&0!==e&&!(++this.timeoutAttempts>5)){var t=i.default.localStore.validation.expires,n=e>0?Math.min(e,t):t;this.runTimeout=setTimeout(this.run.bind(this),n)}}},{key:"setUserInfo",value:function(e,t){t&&(this.nick=t.nick,this.avatar=t.avatar),this.logged=e}},{key:"update",value:function(e){e&&(e.isLogged&&e.maxAge&&!e.isExpired&&this.setRunTimeout(e.maxAge),"boolean"!=typeof e.isLogged||e.isLogged||this.removeLocalData()),this.setUserInfo(e&&e.isLogged,e&&e.userInfo),this.notify(e&&e.isLogged)}}]),e}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(35)),i=s(n(36)),a=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}var u=void 0,l=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),void 0!==u?u:(this.baseUrl=a.default.api.host+"/"+a.default.api.version+"/",u=this)}return r(e,[{key:"get",value:function(e,t){var n=this.baseUrl+"/"+e;n+="?"+i.default.stringify(t);return o.default.get(n,{mode:"cors"}).then(this.status).then(this.json).then((function(e){return e})).catch((function(e){return console.error("Request failed",e),Promise.reject(e)}))}},{key:"post",value:function(e,t){var n=""+this.baseUrl+e;return o.default.post(n,{headers:{"Content-type":"application/json"},mode:"cors",credentials:"include",body:JSON.stringify(t)}).then(this.status).then(this.json).then((function(e){return e})).catch((function(e){return console.error("Request failed",e),Promise.reject(e)}))}},{key:"status",value:function(e){return e.status>=200&&e.status<300?Promise.resolve(e):Promise.reject("Response status not valid: "+e.status)}},{key:"json",value:function(e){return e.json()}}]),e}();t.default=l},function(e,t,n){var r;r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";"function"!=typeof Object.assign&&(Object.assign=function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var o=arguments[r];if(null!=o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])}return n})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3);t.default=r.ueFetch},function(e,t,n){"use strict";!function(e){if(!e.fetch){var t="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,r="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in e,i="ArrayBuffer"in e;if(i)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(e){return e&&DataView.prototype.isPrototypeOf(e)},u=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};p.prototype.append=function(e,t){e=f(e),t=d(t);var n=this.map[e];this.map[e]=n?n+","+t:t},p.prototype.delete=function(e){delete this.map[f(e)]},p.prototype.get=function(e){return e=f(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(f(e))},p.prototype.set=function(e,t){this.map[f(e)]=d(t)},p.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},p.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),h(e)},p.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},p.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),h(e)},n&&(p.prototype[Symbol.iterator]=p.prototype.entries);var l=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},b.call(w.prototype),b.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:0,statusText:""});return e.type="error",e};var c=[301,302,303,307,308];_.redirect=function(e,t){if(-1===c.indexOf(t))throw new RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})},e.Headers=p,e.Request=w,e.Response=_,e.fetch=function(e,t){return new Promise((function(n,o){var i=new w(e,t),a=new XMLHttpRequest;a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}})),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;n(new _(o,r))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.open(i.method,i.url,!0),"include"===i.credentials?a.withCredentials=!0:"omit"===i.credentials&&(a.withCredentials=!1),"responseType"in a&&r&&(a.responseType="blob"),i.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),a.send(void 0===i._bodyInit?null:i._bodyInit)}))},e.fetch.polyfill=!0}function f(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function v(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function g(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function m(e){var t=new FileReader,n=g(t);return t.readAsArrayBuffer(e),n}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(r&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(o&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(i&&r&&s(e))this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(e)&&!u(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=y(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=function(){var e=v(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var e,t,n,r=v(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=g(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(k)}),this.json=function(){return this.text().then(JSON.parse)},this}function w(e,t){var n,r,o=(t=t||{}).body;if(e instanceof w){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new p(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),l.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function k(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function _(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:void 0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ueFetch=void 0;var r,o=n(0);(r=o)&&r.__esModule,Response.prototype.textIso=function(){return Response.prototype.arrayBuffer.apply(this,arguments).then((function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}))},t.ueFetch=Object.assign.apply(Object,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(["get","post"].map((function(e){return function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(t,Object.assign(n,{method:e}))}))}))))},function(e,t,n){n(0),n(2),e.exports=n(1)}])},e.exports=r()},function(e,t,n){"use strict";var r=n(37),o=n(38),i=n(39);function a(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}function s(e){var t=e.indexOf("?");return-1===t?"":e.slice(t+1)}function u(e,t){var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t=o({arrayFormat:"none"},t)),r=Object.create(null);return"string"!=typeof e?r:(e=e.trim().replace(/^[?#&]/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),o=t.shift(),a=t.length>0?t.join("="):void 0;a=void 0===a?null:i(a),n(i(o),a,r)})),Object.keys(r).sort().reduce((function(e,t){var n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return t[e]})):t}(n):e[t]=n,e}),Object.create(null))):r}t.extract=s,t.parse=u,t.stringify=function(e,t){!1===(t=o({encode:!0,strict:!0,arrayFormat:"none"},t)).sort&&(t.sort=function(){});var n=function(e){switch(e.arrayFormat){case"index":return function(t,n,r){return null===n?[a(t,e),"[",r,"]"].join(""):[a(t,e),"[",a(r,e),"]=",a(n,e)].join("")};case"bracket":return function(t,n){return null===n?a(t,e):[a(t,e),"[]=",a(n,e)].join("")};default:return function(t,n){return null===n?a(t,e):[a(t,e),"=",a(n,e)].join("")}}}(t);return e?Object.keys(e).sort(t.sort).map((function(r){var o=e[r];if(void 0===o)return"";if(null===o)return a(r,t);if(Array.isArray(o)){var i=[];return o.slice().forEach((function(e){void 0!==e&&i.push(n(r,e,i.length))})),i.join("&")}return a(r,t)+"="+a(o,t)})).filter((function(e){return e.length>0})).join("&"):""},t.parseUrl=function(e,t){return{url:e.split("?")[0]||"",query:u(s(e),t)}}},function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=a(e),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))o.call(n,c)&&(u[c]=n[c]);if(r){s=r(n);for(var f=0;f<s.length;f++)i.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},function(e,t,n){"use strict";var r=new RegExp("%[a-f0-9]{2}","gi"),o=new RegExp("(%[a-f0-9]{2})+","gi");function i(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],i(n),i(r))}function a(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(r),n=1;n<t.length;n++)t=(e=i(t,n).join("")).match(r);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=o.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=a(n[0]);r!==n[0]&&(t[n[0]]=r)}n=o.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),s=0;s<i.length;s++){var u=i[s];e=e.replace(new RegExp(u,"g"),t[u])}return e}(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(41),a=(r=i)&&r.__esModule?r:{default:r};var s=null,u=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s||(this.store=null,this.checkIndexDbSupport(),s=this),s}return o(e,[{key:"checkIndexDbSupport",value:function(){"indexedDB"in window?this.store=a.default:console.debug("This browser doesn't support IndexedDB")}},{key:"get",value:function(e){var t=this;return new Promise((function(n){if(null===t.store)n(null);else{var r=null;t.store.get(e).then((function(e){void 0!==e&&(r=e),n(r)})).catch((function(e){console.error("Store error",e)}))}}))}},{key:"set",value:function(e,t){var n=this;return new Promise((function(r){null===n.store?r({}):n.store.set(e,t).then((function(){r()})).catch((function(e){console.error("Store error",e)}))}))}},{key:"delete",value:function(e){var t=this;return new Promise((function(n){null===t.store?n({}):t.store.delete(e).then((function(){n()})).catch((function(e){console.error("Store error",e)}))}))}},{key:"remove",value:function(){return this.store.clear().catch((function(e){console.error("Store error",e)}))}}]),e}();t.default=u},function(e,t,n){var r;!function(){"use strict";var n;function o(e,t){return(n||(n=new Promise((function(e,t){var n=indexedDB.open("keyval-store",1);n.onerror=function(){t(n.error)},n.onupgradeneeded=function(){n.result.createObjectStore("keyval")},n.onsuccess=function(){e(n.result)}}))),n).then((function(n){return new Promise((function(r,o){var i=n.transaction("keyval",e);i.oncomplete=function(){r()},i.onabort=i.onerror=function(){o(i.error)},t(i.objectStore("keyval"))}))}))}var i={get:function(e){var t;return o("readonly",(function(n){t=n.get(e)})).then((function(){return t.result}))},set:function(e,t){return o("readwrite",(function(n){n.put(t,e)}))},delete:function(e){return o("readwrite",(function(t){t.delete(e)}))},clear:function(){return o("readwrite",(function(e){e.clear()}))},keys:function(){var e=[];return o("readonly",(function(t){(t.openKeyCursor||t.openCursor).call(t).onsuccess=function(){this.result&&(e.push(this.result.key),this.result.continue())}})).then((function(){return e}))}};e.exports?e.exports=i:void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),a=(r=i)&&r.__esModule?r:{default:r};var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,[{key:"get",value:function(){return window.localStorage&&window.localStorage.getItem(a.default.localStore.jwt.keyName)}},{key:"set",value:function(e){window.localStorage&&window.localStorage.setItem(a.default.localStore.jwt.keyName,e||"")}},{key:"remove",value:function(){window.localStorage&&window.localStorage.getItem(a.default.localStore.jwt.keyName)&&window.localStorage.removeItem(a.default.localStore.jwt.keyName)}}]),e}();t.default=s},function(e,t,n){"use strict";var r,o=n(9),i=(r=o)&&r.__esModule?r:{default:r};var a,s=!1,u="";document.addEventListener("loggedUser",(function(e){a=e.detail.logged})),document.addEventListener("REGLogin",(function(){u=window.location.href}));var l=function(e){if(!(e instanceof HTMLElement))return!1;this.reload=function(e){e==window.location.href?window.location.reload():window.location.href=e},this.loginHandle=function(){a=!0,s?this.reload(u):this.disable()},this.logoutHandle=function(){a=!1,s||(s=!0,u=window.location.href),this.enable()},this.enable=function(){e.classList.remove("no-visible")},this.disable=function(){e.classList.add("no-visible")},this.init=function(){e._data&&e._data.ueButtonForPremium||(e._data={},e._data.ueButtonForPremium=!0,null!=a&&(a?this.loginHandle():this.logoutHandle()),e.addEventListener("click",(function(e){if(!0!==a){e&&e.preventDefault();var t=new CustomEvent("REGLogin",{bubbles:!0});this.dispatchEvent(t)}})),document.addEventListener("login",this.loginHandle.bind(this)),document.addEventListener("logout",this.logoutHandle.bind(this)),document.addEventListener("loggedUser",function(e){e.detail.logged?this.loginHandle():this.logoutHandle()}.bind(this)))},this.init()};(0,i.default)((function(){new l(document.querySelector(".js-button-premium")),window.document.addEventListener("nc-contentLoaded",(function(e){var t=e.detail.nIndex,n=document.querySelector('body > main.js_navContinua[data-ue-navindex="'+t+'"]');n&&new l(n.querySelector(".js-button-premium"))}))}))}]);